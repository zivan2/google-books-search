{"version":3,"sources":["Saved.js","Search.js","App.js","index.js"],"names":["Saved","axios","require","default","Search","props","state","this","search","query","document","getElementById","value","get","replace","then","r","items","data","finish","id","console","log","ALLDONE","item","s","saved","setState","results","i","response","currentIndex","status","catch","e","saveBook","book","method","url","title","volumeInfo","author","authors","publisher","synopsis","description","infoLink","error","newState","type","onClick","rend","map","push","href","className","React","Component","App","exact","path","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.e2d0d92c.chunk.js","sourcesContent":["function Saved() {\r\n    return (<div></div>)\r\n}\r\n\r\nexport default Saved","import React from 'react'\r\nimport Saved from './Saved'\r\nlet axios = require('axios').default\r\n\r\nclass Search extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {}\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.search = () => {\r\n            let query = document.getElementById('searchInput').value\r\n            axios.get(`https://www.googleapis.com/books/v1/volumes?q=${query.replace(' ', '%20')}`).then(r => {\r\n                let items = r.data.items\r\n                let finish = (id=null) => {\r\n                    console.log(id)\r\n                    let ALLDONE = true\r\n                    for (let item of items) {\r\n                        let s = item.saved  \r\n                        if (!s && (typeof s == 'undefined' || typeof s == 'object')) ALLDONE = false\r\n                        console.log('forever')\r\n                    }\r\n                    if (ALLDONE) {\r\n                        this.setState({results: items})\r\n                    }\r\n                }\r\n\r\n                for (let i in items) {\r\n                    axios.get(`/books?id=${items[i].id}`).then(response => {\r\n                        let currentIndex = i\r\n                        if (response.status == 200) {\r\n                            items[currentIndex].saved = true\r\n                        } else {\r\n                            items[currentIndex].saved = false\r\n                        }\r\n                        console.log(i, items[currentIndex].saved)\r\n                        finish(i)\r\n                    }).catch(e => {\r\n                        let currentIndex = i\r\n                        items[currentIndex].saved = false\r\n                        console.log(i, items[currentIndex].saved)\r\n                        finish(i)\r\n                    })\r\n                    console.log('forev ssser')\r\n                }\r\n            })\r\n        }\r\n        this.saveBook = (book, i) => {\r\n            console.log(book)\r\n            axios({\r\n                method: 'post',\r\n                url: '/books',\r\n                data: {\r\n                    id: book.id,\r\n                    title: book.volumeInfo.title,\r\n                    author: book.volumeInfo.authors ? book.volumeInfo.authors[0] : book.volumeInfo.publisher,\r\n                    synopsis: book.volumeInfo.description,\r\n                    url: book.volumeInfo.infoLink\r\n                }\r\n            }).catch(e => console.error(e))\r\n            this.setState(state => {\r\n                let newState = state\r\n                newState.results[i].saved = false\r\n                return newState\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <input id='searchInput' type='text'></input>\r\n                <button onClick={() => this.search()}>Search</button>\r\n                <div>\r\n                    {\r\n                        (() => {\r\n                            if (!this.state.results) {\r\n                                return (<p>Begin by searching for a book</p>)\r\n                            } else {\r\n                                let rend = []\r\n                                console.log(this.state.results)\r\n                                this.state.results.map((item, i) => {\r\n                                    rend.push (\r\n                                        <div key={`result-item-${i}`}>\r\n                                            <h3>{item.volumeInfo.title}</h3>\r\n                                            <p>{item.volumeInfo.description || 'No description found.'}</p>\r\n                                            <a href={item.volumeInfo.infoLink}>Google books page</a>\r\n                                            <div id='saveButton'>\r\n                                                {(() => {\r\n                                                    if (!item.saved) {\r\n                                                        return (\r\n                                                            <button onClick={() => this.saveBook(item, i)}>Save</button>\r\n                                                        )\r\n                                                    } else {\r\n                                                        return (\r\n                                                            <button className='disabled'>Saved âœ“</button>\r\n                                                        )\r\n                                                    }\r\n                                                })()}\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                                return rend\r\n                            }\r\n                        })()\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search","import {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\"\nimport Search from './Search.js'\nimport Saved from './Saved.js'\nimport './bootstrap.css'\nlet axios = require('axios').default\n\n\nfunction App() {\n  return (\n    <div>\n      <header>\n        <h1>Google books search</h1>\n        <ul>\n          <li>\n            <a href='/search'>Search</a>\n          </li>\n          <li>\n            <a href='/saved'>Saved</a>\n          </li>\n        </ul>\n      </header>\n      <Router>\n        <Switch>\n          <Route exact path='/'>\n            <Search />\n          </Route>\n          <Route path='/search'>\n            <Search />\n          </Route>\n          <Route path='/saved'>\n            <Saved />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)"],"sourceRoot":""}